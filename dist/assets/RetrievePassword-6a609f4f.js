import{u as G,r as b,a as u,C as R,b as j,d as k,e as H,f,h as t,w as l,j as i,D as J,F as K,G as X,H as Q,E as W,z as Y,k as L,n as p,J as ee,t as B,K as te,L as S,M as F,p as oe,q as le,B as re,x as ae,A as ne,O as se,P as ie}from"./index-bccd47a8.js";import{u as de,s as me}from"./jsencrypt.min-1d2336c6.js";import{C as q,s as ue}from"./success8-c1490c71.js";const pe={class:"RetrievePassword"},fe={class:"RetrievePasswordContainer"},ce=f("span",{class:"title"},"LoadRunnerX 密码找回",-1),ge={class:"emailCode"},_e=f("div",{class:"divider"},null,-1),xe={class:"phoneCode"},ye=f("div",{class:"divider"},null,-1),be={style:{width:"100%","min-height":"272px",display:"flex","flex-direction":"column","align-items":"center"}},we=["src"],Te={__name:"RetrievePassword",setup(he){de(),G();const A=b(ue+"?"+ +new Date);let d=b(0);const V=b(null),v=b(null),C=b(null),_=u({userName:"",password:"",confirmPassword:""}),s=u({email:"",emailCode:"",phone:"",phoneCode:""}),m=u({problemOne:"",answerOne:"",problemTwo:"",answerTwo:""}),Z=u({userName:[{required:!0,message:"请输入用户名!",trigger:"change"},{validator(r,e,o){/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/.test(e)?o():o(new Error("账号必须是字母开头，可以包含字母、数字、下划线，长度在3到16个字符之间"))},trigger:"change"}]}),E=u({email:[{validator(r,e,o){!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/.test(e)&&e!=""?(c.disabled=!0,o(new Error("请输入正确邮箱"))):(e==""?c.disabled=!0:c.disabled=!1,o())},trigger:"change"}],emailCode:[{validator(r,e,o){const n=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/;n.test(s.email)&&e.length!=4?o(new Error("请正确输入邮箱验证码")):!n.test(s.email)&&e.length!=0?o(new Error("请勿输入验证码")):o()},trigger:"change"}],phone:[{validator(r,e,o){!/^1[3-9]\d{9}$/.test(e)&&e!=""?(g.disabled=!0,o(new Error("请输入正确手机号"))):(e==""?g.disabled=!0:g.disabled=!1,o())},trigger:"change"}],phoneCode:[{validator(r,e,o){const n=/^1[3-9]\d{9}$/;n.test(s.phone)&&e.length!=4?o(new Error("请正确输入手机验证码")):!n.test(s.phone)&&e.length!=0?o(new Error("请勿输入验证码")):o()},trigger:"change"}]}),O=u({problemOne:[{required:!0,message:"请输入密保问题一",trigger:"change"}],answerOne:[{required:!0,message:"请输入密保答案一",trigger:"change"}],problemTwo:[{required:!0,message:"请输入密保问题二",trigger:"change"}],answerTwo:[{required:!0,message:"请输入密保答案二",trigger:"change"}]}),c=u({type:"primary",btnText:"获取验证码",disabled:!0}),g=u({type:"primary",btnText:"获取验证码",disabled:!0});let P=u({state:!1,text:"注册中"});function w(r){r.validate(e=>{e&&d.value==0&&(d.value=.5)})}function $(){d.value--}function T(r){r.type="",r.disabled=!0,r.btnText="请稍候...",setTimeout(()=>{M(60,r)},500)}function M(r,e){me("验证码已发送!"),r=r||60,e.btnText=r+"s后获取",setTimeout(()=>{r>0&&(e.btnText=r+"s后获取",--r)},1e3);let o=setInterval(()=>{r>0?(e.btnText=r+"s后获取",--r):(e.btnText="获取验证码",e.disabled=!1,e.type="primary",clearInterval(o))},1e3)}return R(()=>_.userName,(r,e)=>{const o=/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/;r.length==1?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px":r.length==0||o.test(r)?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px"}),R(()=>_.password,(r,e)=>{const o=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;r.length==1?document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px":r.length==0||o.test(r)?document.querySelector(".password").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px"}),(r,e)=>{const o=oe,n=le,x=re,h=ae,y=ne,z=se,U=ie,I=W,N=Y,D=j("router-link");return k(),H("div",pe,[f("div",fe,[ce,t(I,{modelValue:i(d),"onUpdate:modelValue":e[14]||(e[14]=a=>J(d)?d.value=a:d=a),class:"tabs"},{default:l(()=>[t(y,{name:0},{default:l(()=>[t(h,{model:_,ref_key:"accountFormRef",ref:V,rules:Z,class:"myForm"},{default:l(()=>[t(n,{prop:"userName"},{default:l(()=>[t(o,{modelValue:_.userName,"onUpdate:modelValue":e[0]||(e[0]=a=>_.userName=a),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:"","prefix-icon":i(L),size:"large",class:"user_name"},null,8,["modelValue","prefix-icon"])]),_:1}),t(n,null,{default:l(()=>[t(x,{type:"primary",size:"large",style:{width:"100%"},onClick:e[1]||(e[1]=a=>w(V.value))},{default:l(()=>[p(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(y,{name:.5},{default:l(()=>[p(" xxx ")]),_:1}),t(y,{name:1},{default:l(()=>[t(h,{model:s,ref_key:"emailPhoneFormRef",ref:v,rules:E,class:"myForm"},{default:l(()=>[t(n,{prop:"email"},{default:l(()=>[t(z,{class:"box-item",effect:"dark",content:"如不需绑定邮箱不要填写直接下一步即可",placement:"top"},{default:l(()=>[t(o,{modelValue:s.email,"onUpdate:modelValue":e[2]||(e[2]=a=>s.email=a),modelModifiers:{trim:!0},placeholder:"请输入邮箱地址",clearable:"","prefix-icon":i(ee),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(n,{prop:"emailCode"},{default:l(()=>[f("div",ge,[t(o,{modelValue:s.emailCode,"onUpdate:modelValue":e[3]||(e[3]=a=>s.emailCode=a),modelModifiers:{trim:!0},placeholder:"请输入邮箱验证码","prefix-icon":q,size:"large",maxlength:"4"},null,8,["modelValue"]),_e,t(x,{link:"",type:c.type,class:"btnCode",disabled:c.disabled,onClick:e[4]||(e[4]=a=>T(c))},{default:l(()=>[p(B(c.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(n,{prop:"phone"},{default:l(()=>[t(z,{class:"box-item",effect:"dark",content:"如不需绑定手机不要填写直接下一步即可",placement:"top"},{default:l(()=>[t(o,{modelValue:s.phone,"onUpdate:modelValue":e[5]||(e[5]=a=>s.phone=a),modelModifiers:{trim:!0},placeholder:"请输入手机号",clearable:"","prefix-icon":i(te),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(n,{prop:"phoneCode"},{default:l(()=>[f("div",xe,[t(o,{modelValue:s.phoneCode,"onUpdate:modelValue":e[6]||(e[6]=a=>s.phoneCode=a),modelModifiers:{trim:!0},placeholder:"请输入手机验证码","prefix-icon":q,size:"large",maxlength:"4"},null,8,["modelValue"]),ye,t(x,{link:"",type:g.type,class:"btnCode",disabled:g.disabled,onClick:e[7]||(e[7]=a=>T(g))},{default:l(()=>[p(B(g.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(n,null,{default:l(()=>[t(x,{type:"primary",size:"large",style:{width:"100%"},onClick:e[8]||(e[8]=a=>w(v.value))},{default:l(()=>[p(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(y,{name:2},{default:l(()=>[t(h,{model:m,ref_key:"confidentialityFormRef",ref:C,rules:O,class:"myForm"},{default:l(()=>[t(n,{prop:"problemOne"},{default:l(()=>[t(o,{modelValue:m.problemOne,"onUpdate:modelValue":e[9]||(e[9]=a=>m.problemOne=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题一",clearable:"","prefix-icon":i(S),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(n,{prop:"answerOne"},{default:l(()=>[t(o,{modelValue:m.answerOne,"onUpdate:modelValue":e[10]||(e[10]=a=>m.answerOne=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案一",clearable:"","prefix-icon":i(F),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(n,{prop:"problemTwo"},{default:l(()=>[t(o,{modelValue:m.problemTwo,"onUpdate:modelValue":e[11]||(e[11]=a=>m.problemTwo=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题二",clearable:"","prefix-icon":i(S),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(n,{prop:"answerTwo"},{default:l(()=>[t(o,{modelValue:m.answerTwo,"onUpdate:modelValue":e[12]||(e[12]=a=>m.answerTwo=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案二","prefix-icon":i(F),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(n,null,{default:l(()=>[t(x,{type:"primary",size:"large",style:{width:"100%"},onClick:e[13]||(e[13]=a=>w(C.value)),loading:i(P).state},{default:l(()=>[p(" 注册")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(y,{name:4},{default:l(()=>[f("div",be,[t(U,{type:"success"},{default:l(()=>[p("注册成功！")]),_:1}),f("img",{src:A.value,width:"100",height:"100",alt:"Girl has dropped her ice cream."},null,8,we)])]),_:1})]),_:1},8,["modelValue"]),f("div",{class:"gotoLogin",style:K({justifyContent:i(d)>0?"space-between":"right"})},[i(d)>0?(k(),X(N,{key:0,type:"primary",onClick:$},{default:l(()=>[p("上一步")]),_:1})):Q("",!0),t(D,{to:"/member/login"},{default:l(()=>[t(N,{type:"primary"},{default:l(()=>[p("去登录>>")]),_:1})]),_:1})],4)])])}}};export{Te as default};
