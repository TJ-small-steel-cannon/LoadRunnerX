import{_ as X,u as J,o as O,r as _,a as c,g as Q,c as W,b as Y,d as L,e as s,f as o,w as a,E as ee,h as oe,i as le,j as b,k as R,l as T,m as te,n as w,t as z,p as ae,q as se,v as de,s as ie,x as re,y as ne,z as ue,A as me,B as ce,C as pe,D as fe,F as ge,G as _e,H as be}from"./index-47caab3a.js";/* empty css                    */import{u as ve}from"./jsencrypt.min-a37f49fd.js";/* empty css                    *//* empty css                     */import{d as he,e as ye}from"./jsencrpyt-05a4ce78.js";const F=x=>(ae("data-v-ac1062af"),x=x(),se(),x),we={class:"login"},xe={class:"loginContainer"},Ie=F(()=>s("span",{class:"title"},"欢迎登录 LoadRunnerX 压力测试平台",-1)),Ve={class:"codeImg"},Ce={class:"codeInput"},ke={class:"operate"},Re={class:"codeImg"},Te={class:"codeInput"},ze={class:"phoneCode"},Fe=F(()=>s("div",{class:"divider"},null,-1)),Ne={class:"codeImg"},Me={class:"codeInput"},Pe={class:"emailCode"},Ue=F(()=>s("div",{class:"divider"},null,-1)),qe={class:"publicModule"},Se={class:"gotoRegister"},Be={__name:"Login",setup(x){const B=J(),v=ve();O(()=>{m("account"),m("phone"),m("email")});const I=_(null),N=_(null),M=_(null);_("");const d=c({isRememberPassword:v.userInfo.isRememberPassword,userName:v.userInfo.userName,password:he(v.userInfo.password),code:"",uuid:"",codeImg:""}),n=c({phone:"",uuid:"",code:"",phoneCode:"",codeImg:""}),u=c({email:"",code:"",emailCode:"",codeImg:"",uuid:""}),h=_("account"),$=c({userName:[{required:!0,message:"请输入用户名!",trigger:"change"}],password:[{required:!0,message:"请输入密码!",trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),E=c({phone:[{required:!0,message:"请输入手机号码!",trigger:"change"},{validator(l,e,i){!/^1[3-9]\d{9}$/.test(e)&&e!=""?(f.disabled=!0,i(new Error("请输入正确手机号"))):(e==""?f.disabled=!0:f.disabled=!1,i())},trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}],phoneCode:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),A=c({email:[{required:!0,message:"请输入邮箱!",trigger:"change"},{validator(l,e,i){!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/.test(e)&&e!=""?(p.disabled=!0,i(new Error("请输入正确邮箱"))):(e==""?p.disabled=!0:p.disabled=!1,i())},trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}],emailCode:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),y=_(!1),Z=(l,e)=>{console.log(l,e)};function P(){h.value=="account"?I.value.validate(l=>{if(l){y.value=!0;const e={userName:d.userName,userPassword:d.password},i={uuid:d.uuid,code:d.code};de(i).then(r=>{if(r.code===200)return ie(e)}).finally(()=>{y.value=!1,m()}).then(r=>{if(r.code===200){if(d.isRememberPassword){const g={...d,password:ye(d.password),code:""};v.setuserInfo(g)}else{const g={userName:"",password:"",isRememberPassword:!1};v.setuserInfo(g)}re(r.data.token),B.replace("/index")}}).catch(r=>{console.log("errMsg--->",r.message),m("account")}).finally(()=>{y.value=!1})}}):h.value=="phone"?N.value.validate(l=>{}):h.value=="email"&&M.value.validate(l=>{})}function m(l){Q().then(e=>{e.code==200&&(l=="account"?(d.codeImg="data:image/gif;base64,"+e.data.base64Img,d.uuid=e.vcId):l=="phone"?(n.codeImg="data:image/gif;base64,"+e.data.base64Img,n.uuid=e.vcId):l=="email"&&(u.codeImg="data:image/gif;base64,"+e.data.base64Img,u.uuid=e.vcId))})}const p=c({type:"primary",btnText:"获取验证码",disabled:!0}),f=c({type:"primary",btnText:"获取验证码",disabled:!0});function U(l){l.type="",l.disabled=!0,l.btnText="请稍候...",setTimeout(()=>{D(60,l)},500)}function D(l,e){ne("验证码已发送!"),l=l||60,e.btnText=l+"s后获取",setTimeout(()=>{l>0&&(e.btnText=l+"s后获取",--l)},1e3);let i=setInterval(()=>{l>0?(e.btnText=l+"s后获取",--l):(e.btnText="获取验证码",e.disabled=!1,e.type="primary",clearInterval(i))},1e3)}const K=W(()=>l=>l?"登录中":"登录");return(l,e)=>{const i=ue,r=me,g=ce,V=pe,j=fe,q=ge,S=Y("router-link"),C=_e,k=be,G=ee,H=oe;return le(),L("div",we,[s("div",xe,[Ie,o(G,{modelValue:h.value,"onUpdate:modelValue":e[16]||(e[16]=t=>h.value=t),class:"tabs",onTabClick:Z},{default:a(()=>[o(C,{label:"密码登陆",name:"account"},{default:a(()=>[o(V,{model:d,ref_key:"accountFormRef",ref:I,rules:$,style:{width:"100%"}},{default:a(()=>[o(r,{prop:"userName"},{default:a(()=>[o(i,{modelValue:d.userName,"onUpdate:modelValue":e[0]||(e[0]=t=>d.userName=t),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"password"},{default:a(()=>[o(i,{modelValue:d.password,"onUpdate:modelValue":e[1]||(e[1]=t=>d.password=t),modelModifiers:{trim:!0},placeholder:"请输入密码",type:"password",clearable:"","prefix-icon":b(T),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:a(()=>[s("div",Ve,[s("div",Ce,[o(i,{modelValue:d.code,"onUpdate:modelValue":e[2]||(e[2]=t=>d.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",onKeydown:e[3]||(e[3]=te(t=>P(I.value),["enter"])),maxlength:"6"},null,8,["modelValue"])]),s("div",{class:"codePicture",onClick:e[4]||(e[4]=t=>m("account"))},[o(g,{style:{width:"100%",height:"100%"},src:d.codeImg,fit:"fill"},null,8,["src"])])])]),_:1})]),_:1},8,["model","rules"]),s("div",ke,[s("div",null,[o(j,{modelValue:d.isRememberPassword,"onUpdate:modelValue":e[5]||(e[5]=t=>d.isRememberPassword=t),label:"记住密码",size:"small"},null,8,["modelValue"])]),s("div",null,[o(S,{to:"/member/retrievePassword"},{default:a(()=>[o(q,null,{default:a(()=>[w("忘记密码?")]),_:1})]),_:1})])])]),_:1}),o(C,{label:"短信登录",name:"phone"},{default:a(()=>[o(V,{model:n,ref_key:"phoneFormRef",ref:N,rules:E,style:{width:"100%"}},{default:a(()=>[o(r,{prop:"phone"},{default:a(()=>[o(i,{modelValue:n.phone,"onUpdate:modelValue":e[6]||(e[6]=t=>n.phone=t),modelModifiers:{trim:!0},placeholder:"请输入手机号",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:a(()=>[s("div",Re,[s("div",Te,[o(i,{modelValue:n.code,"onUpdate:modelValue":e[7]||(e[7]=t=>n.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",maxlength:"6"},null,8,["modelValue"])]),s("div",{class:"codePicture",onClick:e[8]||(e[8]=t=>m("phone"))},[o(g,{style:{width:"100%",height:"100%"},src:n.codeImg,fit:"fill"},null,8,["src"])])])]),_:1}),o(r,{prop:"phoneCode"},{default:a(()=>[s("div",ze,[o(i,{modelValue:n.phoneCode,"onUpdate:modelValue":e[9]||(e[9]=t=>n.phoneCode=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",type:"password","prefix-icon":b(T),size:"large",maxlength:"6"},null,8,["modelValue","prefix-icon"]),Fe,o(k,{link:"",type:f.type,class:"btnCode",disabled:f.disabled||n.code.length==0,onClick:e[10]||(e[10]=t=>U(f))},{default:a(()=>[w(z(f.btnText),1)]),_:1},8,["type","disabled"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(C,{label:"邮箱登陆",name:"email"},{default:a(()=>[o(V,{model:u,ref_key:"emailFormRef",ref:M,rules:A,style:{width:"100%"}},{default:a(()=>[o(r,{prop:"email"},{default:a(()=>[o(i,{modelValue:u.email,"onUpdate:modelValue":e[11]||(e[11]=t=>u.email=t),modelModifiers:{trim:!0},placeholder:"请输入邮箱",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:a(()=>[s("div",Ne,[s("div",Me,[o(i,{modelValue:u.code,"onUpdate:modelValue":e[12]||(e[12]=t=>u.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",maxlength:"6"},null,8,["modelValue"])]),s("div",{class:"codePicture",onClick:e[13]||(e[13]=t=>m("email"))},[o(g,{style:{width:"100%",height:"100%"},src:u.codeImg,fit:"fill"},null,8,["src"])])])]),_:1}),o(r,{prop:"emailCode"},{default:a(()=>[s("div",Pe,[o(i,{modelValue:u.emailCode,"onUpdate:modelValue":e[14]||(e[14]=t=>u.emailCode=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",type:"password","prefix-icon":b(T),size:"large",maxlength:"6"},null,8,["modelValue","prefix-icon"]),Ue,o(k,{link:"",type:p.type,class:"btnCode",disabled:p.disabled||u.code==0,onClick:e[15]||(e[15]=t=>U(p))},{default:a(()=>[w(z(p.btnText),1)]),_:1},8,["type","disabled"])])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),s("div",qe,[o(H,{direction:"vertical",size:15,alignment:"normal",style:{width:"100%"}},{default:a(()=>[o(k,{type:"primary",size:"large",class:"loginBtn",onClick:P,loading:y.value},{default:a(()=>[w(z(K.value(y.value)),1)]),_:1},8,["loading"]),s("div",Se,[o(S,{to:"/member/register"},{default:a(()=>[o(q,{type:"primary"},{default:a(()=>[w("没有账号我要免费注册>>")]),_:1})]),_:1})])]),_:1})])])])}}},je=X(Be,[["__scopeId","data-v-ac1062af"]]);export{je as default};
