import{_ as H,u as J,o as O,r as _,a as m,g as Q,c as W,b as Y,d as L,e as d,f as o,w as s,E as ee,h as oe,i as le,j as b,k as R,l as T,m as te,n as h,t as z,p as se,q as ae,s as de,v as ie,x as re,y as ne,z as ue,A as me,B as ce,C as pe,D as ge,F as fe,G as _e}from"./index-250769d3.js";/* empty css                    */import{u as be}from"./jsencrypt.min-aac4fe8c.js";/* empty css                    *//* empty css                     */import{d as ve,e as he}from"./jsencrpyt-e26fec46.js";const F=w=>(se("data-v-71bd9d34"),w=w(),ae(),w),we={class:"login"},xe={class:"loginContainer"},ye=F(()=>d("span",{class:"title"},"欢迎登录 LoadRunnerX 压力测试平台",-1)),Ie={class:"codeImg"},Ve={class:"codeInput"},Ce={class:"operate"},ke={class:"codeImg"},Re={class:"codeInput"},Te={class:"phoneCode"},ze=F(()=>d("div",{class:"divider"},null,-1)),Fe={class:"codeImg"},Ne={class:"codeInput"},Pe={class:"emailCode"},Me=F(()=>d("div",{class:"divider"},null,-1)),Ue={class:"publicModule"},qe={class:"gotoRegister"},Se={__name:"Login",setup(w){const B=J(),f=be();O(()=>{console.log(f.userInfo),c("account"),c("phone"),c("email")});const y=_(null),N=_(null),P=_(null);_("");const i=m({isRememberPassword:f.userInfo.isRememberPassword,userName:f.userInfo.userName,password:ve(f.userInfo.password),code:"",uuid:"",codeImg:""}),n=m({phone:"",uuid:"",code:"",phoneCode:"",codeImg:""}),u=m({email:"",code:"",emailCode:"",codeImg:"",uuid:""}),v=_("account"),$=m({userName:[{required:!0,message:"请输入用户名!",trigger:"change"}],password:[{required:!0,message:"请输入密码!",trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),E=m({phone:[{required:!0,message:"请输入手机号码!",trigger:"change"},{validator(l,e,a){!/^1[3-9]\d{9}$/.test(e)&&e!=""?(g.disabled=!0,a(new Error("请输入正确手机号"))):(e==""?g.disabled=!0:g.disabled=!1,a())},trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}],phoneCode:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),A=m({email:[{required:!0,message:"请输入邮箱!",trigger:"change"},{validator(l,e,a){!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/.test(e)&&e!=""?(p.disabled=!0,a(new Error("请输入正确邮箱"))):(e==""?p.disabled=!0:p.disabled=!1,a())},trigger:"change"}],code:[{required:!0,message:"请输入验证码!",trigger:"change"}],emailCode:[{required:!0,message:"请输入验证码!",trigger:"change"}]}),x=_(!1),Z=(l,e)=>{console.log(l,e)};function M(){v.value=="account"?y.value.validate(l=>{if(l){x.value=!0;const e={userName:i.userName,userPassword:i.password,vcPictureCode:{result:i.code,vcId:i.uuid}};de(e).then(a=>{if(a.code==200){if(i.isRememberPassword){const r={...i,password:he(i.password),code:""};f.setuserInfo(r)}else{const r={userName:"",password:"",isRememberPassword:!1};f.setuserInfo(r)}ie(a.uuid),B.replace("/index")}}).catch(a=>{console.log("errMsg--->",a.message),c("account")}).finally(()=>{x.value=!1})}}):v.value=="phone"?N.value.validate(l=>{}):v.value=="email"&&P.value.validate(l=>{})}function c(l){Q().then(e=>{e.code==200&&(l=="account"?(i.codeImg="data:image/gif;base64,"+e.base64Img,i.uuid=e.vcId):l=="phone"?(n.codeImg="data:image/gif;base64,"+e.base64Img,n.uuid=e.vcId):l=="email"&&(u.codeImg="data:image/gif;base64,"+e.base64Img,u.uuid=e.vcId))})}const p=m({type:"primary",btnText:"获取验证码",disabled:!0}),g=m({type:"primary",btnText:"获取验证码",disabled:!0});function U(l){l.type="",l.disabled=!0,l.btnText="请稍候...",setTimeout(()=>{D(60,l)},500)}function D(l,e){re("验证码已发送!"),l=l||60,e.btnText=l+"s后获取",setTimeout(()=>{l>0&&(e.btnText=l+"s后获取",--l)},1e3);let a=setInterval(()=>{l>0?(e.btnText=l+"s后获取",--l):(e.btnText="获取验证码",e.disabled=!1,e.type="primary",clearInterval(a))},1e3)}const K=W(()=>l=>l?"登录中":"登录");return(l,e)=>{const a=ne,r=ue,I=me,V=ce,j=pe,q=ge,S=Y("router-link"),C=fe,k=_e,G=ee,X=oe;return le(),L("div",we,[d("div",xe,[ye,o(G,{modelValue:v.value,"onUpdate:modelValue":e[16]||(e[16]=t=>v.value=t),class:"tabs",onTabClick:Z},{default:s(()=>[o(C,{label:"密码登陆",name:"account"},{default:s(()=>[o(V,{model:i,ref_key:"accountFormRef",ref:y,rules:$,style:{width:"100%"}},{default:s(()=>[o(r,{prop:"userName"},{default:s(()=>[o(a,{modelValue:i.userName,"onUpdate:modelValue":e[0]||(e[0]=t=>i.userName=t),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"password"},{default:s(()=>[o(a,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t),modelModifiers:{trim:!0},placeholder:"请输入密码",type:"password",clearable:"","prefix-icon":b(T),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:s(()=>[d("div",Ie,[d("div",Ve,[o(a,{modelValue:i.code,"onUpdate:modelValue":e[2]||(e[2]=t=>i.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",onKeydown:e[3]||(e[3]=te(t=>M(y.value),["enter"])),maxlength:"6"},null,8,["modelValue"])]),d("div",{class:"codePicture",onClick:e[4]||(e[4]=t=>c("account"))},[o(I,{style:{width:"100%",height:"100%"},src:i.codeImg,fit:"fill"},null,8,["src"])])])]),_:1})]),_:1},8,["model","rules"]),d("div",Ce,[d("div",null,[o(j,{modelValue:i.isRememberPassword,"onUpdate:modelValue":e[5]||(e[5]=t=>i.isRememberPassword=t),label:"记住密码",size:"small"},null,8,["modelValue"])]),d("div",null,[o(S,{to:"/member/retrievePassword"},{default:s(()=>[o(q,null,{default:s(()=>[h("忘记密码?")]),_:1})]),_:1})])])]),_:1}),o(C,{label:"短信登录",name:"phone"},{default:s(()=>[o(V,{model:n,ref_key:"phoneFormRef",ref:N,rules:E,style:{width:"100%"}},{default:s(()=>[o(r,{prop:"phone"},{default:s(()=>[o(a,{modelValue:n.phone,"onUpdate:modelValue":e[6]||(e[6]=t=>n.phone=t),modelModifiers:{trim:!0},placeholder:"请输入手机号",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:s(()=>[d("div",ke,[d("div",Re,[o(a,{modelValue:n.code,"onUpdate:modelValue":e[7]||(e[7]=t=>n.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",maxlength:"6"},null,8,["modelValue"])]),d("div",{class:"codePicture",onClick:e[8]||(e[8]=t=>c("phone"))},[o(I,{style:{width:"100%",height:"100%"},src:n.codeImg,fit:"fill"},null,8,["src"])])])]),_:1}),o(r,{prop:"phoneCode"},{default:s(()=>[d("div",Te,[o(a,{modelValue:n.phoneCode,"onUpdate:modelValue":e[9]||(e[9]=t=>n.phoneCode=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",type:"password","prefix-icon":b(T),size:"large",maxlength:"6"},null,8,["modelValue","prefix-icon"]),ze,o(k,{link:"",type:g.type,class:"btnCode",disabled:g.disabled||n.code.length==0,onClick:e[10]||(e[10]=t=>U(g))},{default:s(()=>[h(z(g.btnText),1)]),_:1},8,["type","disabled"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(C,{label:"邮箱登陆",name:"email"},{default:s(()=>[o(V,{model:u,ref_key:"emailFormRef",ref:P,rules:A,style:{width:"100%"}},{default:s(()=>[o(r,{prop:"email"},{default:s(()=>[o(a,{modelValue:u.email,"onUpdate:modelValue":e[11]||(e[11]=t=>u.email=t),modelModifiers:{trim:!0},placeholder:"请输入邮箱",clearable:"","prefix-icon":b(R),size:"large",style:{width:"100%"}},null,8,["modelValue","prefix-icon"])]),_:1}),o(r,{prop:"code"},{default:s(()=>[d("div",Fe,[d("div",Ne,[o(a,{modelValue:u.code,"onUpdate:modelValue":e[12]||(e[12]=t=>u.code=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",clearable:"",size:"large",maxlength:"6"},null,8,["modelValue"])]),d("div",{class:"codePicture",onClick:e[13]||(e[13]=t=>c("email"))},[o(I,{style:{width:"100%",height:"100%"},src:u.codeImg,fit:"fill"},null,8,["src"])])])]),_:1}),o(r,{prop:"emailCode"},{default:s(()=>[d("div",Pe,[o(a,{modelValue:u.emailCode,"onUpdate:modelValue":e[14]||(e[14]=t=>u.emailCode=t),modelModifiers:{trim:!0},placeholder:"请输入验证码",type:"password","prefix-icon":b(T),size:"large",maxlength:"6"},null,8,["modelValue","prefix-icon"]),Me,o(k,{link:"",type:p.type,class:"btnCode",disabled:p.disabled||u.code==0,onClick:e[15]||(e[15]=t=>U(p))},{default:s(()=>[h(z(p.btnText),1)]),_:1},8,["type","disabled"])])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),d("div",Ue,[o(X,{direction:"vertical",size:15,alignment:"normal",style:{width:"100%"}},{default:s(()=>[o(k,{type:"primary",size:"large",class:"loginBtn",onClick:M,loading:x.value},{default:s(()=>[h(z(K.value(x.value)),1)]),_:1},8,["loading"]),d("div",qe,[o(S,{to:"/member/register"},{default:s(()=>[o(q,{type:"primary"},{default:s(()=>[h("没有账号我要免费注册>>")]),_:1})]),_:1})])]),_:1})])])])}}},Ke=H(Se,[["__scopeId","data-v-71bd9d34"]]);export{Ke as default};
