import{u as W,r as h,a as c,B as E,b as Y,d as v,e as L,f as _,g as t,w as o,i as a,C as ee,D as te,F as R,G as oe,H as re,E as le,y as se,j as ae,l as Z,m as g,I as ne,t as O,J as ie,K as M,L as U,M as de,n as me,p as pe,A as ue,v as fe,z as ce,N as ge,O as _e}from"./index-4bd3311b.js";import{u as we,s as $}from"./jsencrypt.min-6e33a064.js";import{C as P,s as ye}from"./success8-f92dce55.js";import{s as xe,e as be}from"./jsencrpyt-fe17c7f4.js";import"./axios-47b9d439.js";function he(S){return xe({url:"/register",headers:{isToken:!1},method:"post",data:S})}const Ve={class:"register"},ve={class:"registerContainer"},ze=_("span",{class:"title"},"注册 LoadRunnerX 压力测试平台",-1),Ne={class:"emailCode"},Te=_("div",{class:"divider"},null,-1),Ce={class:"phoneCode"},Re=_("div",{class:"divider"},null,-1),Se={style:{width:"100%","min-height":"272px",display:"flex","flex-direction":"column","align-items":"center"}},ke=["src"],Ze={__name:"Register",setup(S){const I=we();W();const D=h(ye+"?"+ +new Date);let m=h(0);const k=h(null),B=h(null),z=h(null),n=c({userName:"",password:"",confirmPassword:""}),p=c({email:"",emailCode:"",phone:"",phoneCode:""}),u=c({problemOne:"",answerOne:"",problemTwo:"",answerTwo:""}),G=c({userName:[{required:!0,message:"请输入用户名!",trigger:"change"},{validator(l,e,r){/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/.test(e)?r():r(new Error("账号必须是字母开头，可以包含字母、数字、下划线，长度在3到16个字符之间"))},trigger:"change"}],password:[{required:!0,message:"请输入密码!",trigger:"change"},{validator(l,e,r){/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/.test(e)?r():r(new Error("密码可以由字母、数字、下划线组成，至少包含一个字母和一个数字，长度在8到16个字符之间"))},trigger:"change"}],confirmPassword:[{required:!0,message:"请再次输入密码!",trigger:"change"},{validator(l,e,r){e!=n.password?r(new Error("两次密码输入不相符")):r()},trigger:"change"}]}),j=c({email:[{validator(l,e,r){!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/.test(e)&&e!=""?(w.disabled=!0,r(new Error("请输入正确邮箱"))):(e==""?w.disabled=!0:w.disabled=!1,r())},trigger:"change"}],emailCode:[{validator(l,e,r){const i=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/;i.test(p.email)&&e.length!=4?r(new Error("请正确输入邮箱验证码")):!i.test(p.email)&&e.length!=0?r(new Error("请勿输入验证码")):r()},trigger:"change"}],phone:[{validator(l,e,r){!/^1[3-9]\d{9}$/.test(e)&&e!=""?(y.disabled=!0,r(new Error("请输入正确手机号"))):(e==""?y.disabled=!0:y.disabled=!1,r())},trigger:"change"}],phoneCode:[{validator(l,e,r){const i=/^1[3-9]\d{9}$/;i.test(p.phone)&&e.length!=4?r(new Error("请正确输入手机验证码")):!i.test(p.phone)&&e.length!=0?r(new Error("请勿输入验证码")):r()},trigger:"change"}]}),H=c({problemOne:[{required:!0,message:"请输入密保问题一",trigger:"change"}],answerOne:[{required:!0,message:"请输入密保答案一",trigger:"change"}],problemTwo:[{required:!0,message:"请输入密保问题二",trigger:"change"}],answerTwo:[{required:!0,message:"请输入密保答案二",trigger:"change"}]}),w=c({type:"primary",btnText:"获取验证码",disabled:!0}),y=c({type:"primary",btnText:"获取验证码",disabled:!0});let x=c({state:!1,text:"注册中"});function N(l){l.validate(e=>{if(e)if(l==z.value){x.state=!0,x.text="注册中";const r={user_name:n.userName,user_password:n.password,user_sec_problem_1:u.problemOne,user_sec_problem_2:u.problemTwo,user_sec_answer_1:u.answerOne,user_sec_answer_2:u.answerTwo};he(r).then(i=>{if(i.code==200){$("注册成功"),m.value=4,x.state=!1,x.text="注册";const f={userName:n.userName,password:be(n.password),isRememberPassword:!0};I.setuserInfo(f)}else console.log("err-->",i)})}else m.value++})}function J(){m.value--}function q(l){l.type="",l.disabled=!0,l.btnText="请稍候...",setTimeout(()=>{K(60,l)},500)}function K(l,e){$("验证码已发送!"),l=l||60,e.btnText=l+"s后获取",setTimeout(()=>{l>0&&(e.btnText=l+"s后获取",--l)},1e3);let r=setInterval(()=>{l>0?(e.btnText=l+"s后获取",--l):(e.btnText="获取验证码",e.disabled=!1,e.type="primary",clearInterval(r))},1e3)}return E(()=>n.userName,(l,e)=>{const r=/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/;l.length==1?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px":l.length==0||r.test(l)?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px"}),E(()=>n.password,(l,e)=>{const r=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;l.length==1?document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px":l.length==0||r.test(l)?document.querySelector(".password").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px"}),(l,e)=>{const r=de,i=re,f=me,d=pe,b=ue,T=fe,V=ce,A=ge,X=_e,Q=le,C=se,F=Y("router-link");return v(),L("div",Ve,[_("div",ve,[ze,t(i,{active:a(m),"finish-status":"success","process-status":"finish","align-center":"",space:100,class:"register_steps"},{default:o(()=>[t(r,{title:"填写账号密码"}),t(r,{title:"绑定邮箱/手机号"}),t(r,{title:"设置密保"}),t(r,{title:"完成注册"})]),_:1},8,["active"]),t(Q,{modelValue:a(m),"onUpdate:modelValue":e[16]||(e[16]=s=>ee(m)?m.value=s:m=s),class:"tabs"},{default:o(()=>[t(V,{name:0},{default:o(()=>[t(T,{model:n,ref_key:"accountFormRef",ref:k,rules:G,class:"myForm"},{default:o(()=>[t(d,{prop:"userName"},{default:o(()=>[t(f,{modelValue:n.userName,"onUpdate:modelValue":e[0]||(e[0]=s=>n.userName=s),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:"","prefix-icon":a(ae),size:"large",class:"user_name"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{prop:"password"},{default:o(()=>[t(f,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=s=>n.password=s),modelModifiers:{trim:!0},placeholder:"请输入密码",type:"password",class:"password",clearable:"","show-password":"","prefix-icon":a(Z),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{prop:"confirmPassword"},{default:o(()=>[t(f,{modelValue:n.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>n.confirmPassword=s),modelModifiers:{trim:!0},placeholder:"请再次输入密码",type:"password",clearable:"","show-password":"","prefix-icon":a(Z),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,null,{default:o(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[3]||(e[3]=s=>N(k.value))},{default:o(()=>[g(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:1},{default:o(()=>[t(T,{model:p,ref_key:"emailPhoneFormRef",ref:B,rules:j,class:"myForm"},{default:o(()=>[t(d,{prop:"email"},{default:o(()=>[t(A,{class:"box-item",effect:"dark",content:"如不需绑定邮箱不要填写直接下一步即可",placement:"top"},{default:o(()=>[t(f,{modelValue:p.email,"onUpdate:modelValue":e[4]||(e[4]=s=>p.email=s),modelModifiers:{trim:!0},placeholder:"请输入邮箱地址",clearable:"","prefix-icon":a(ne),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(d,{prop:"emailCode"},{default:o(()=>[_("div",Ne,[t(f,{modelValue:p.emailCode,"onUpdate:modelValue":e[5]||(e[5]=s=>p.emailCode=s),modelModifiers:{trim:!0},placeholder:"请输入邮箱验证码","prefix-icon":P,size:"large",maxlength:"4"},null,8,["modelValue"]),Te,t(b,{link:"",type:w.type,class:"btnCode",disabled:w.disabled,onClick:e[6]||(e[6]=s=>q(w))},{default:o(()=>[g(O(w.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(d,{prop:"phone"},{default:o(()=>[t(A,{class:"box-item",effect:"dark",content:"如不需绑定手机不要填写直接下一步即可",placement:"top"},{default:o(()=>[t(f,{modelValue:p.phone,"onUpdate:modelValue":e[7]||(e[7]=s=>p.phone=s),modelModifiers:{trim:!0},placeholder:"请输入手机号",clearable:"","prefix-icon":a(ie),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(d,{prop:"phoneCode"},{default:o(()=>[_("div",Ce,[t(f,{modelValue:p.phoneCode,"onUpdate:modelValue":e[8]||(e[8]=s=>p.phoneCode=s),modelModifiers:{trim:!0},placeholder:"请输入手机验证码","prefix-icon":P,size:"large",maxlength:"4"},null,8,["modelValue"]),Re,t(b,{link:"",type:y.type,class:"btnCode",disabled:y.disabled,onClick:e[9]||(e[9]=s=>q(y))},{default:o(()=>[g(O(y.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(d,null,{default:o(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[10]||(e[10]=s=>N(B.value))},{default:o(()=>[g(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:2},{default:o(()=>[t(T,{model:u,ref_key:"confidentialityFormRef",ref:z,rules:H,class:"myForm"},{default:o(()=>[t(d,{prop:"problemOne"},{default:o(()=>[t(f,{modelValue:u.problemOne,"onUpdate:modelValue":e[11]||(e[11]=s=>u.problemOne=s),modelModifiers:{trim:!0},placeholder:"请输入密保问题一",clearable:"","prefix-icon":a(M),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{prop:"answerOne"},{default:o(()=>[t(f,{modelValue:u.answerOne,"onUpdate:modelValue":e[12]||(e[12]=s=>u.answerOne=s),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案一",clearable:"","prefix-icon":a(U),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{prop:"problemTwo"},{default:o(()=>[t(f,{modelValue:u.problemTwo,"onUpdate:modelValue":e[13]||(e[13]=s=>u.problemTwo=s),modelModifiers:{trim:!0},placeholder:"请输入密保问题二",clearable:"","prefix-icon":a(M),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,{prop:"answerTwo"},{default:o(()=>[t(f,{modelValue:u.answerTwo,"onUpdate:modelValue":e[14]||(e[14]=s=>u.answerTwo=s),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案二","prefix-icon":a(U),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(d,null,{default:o(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[15]||(e[15]=s=>N(z.value)),loading:a(x).state},{default:o(()=>[g(" 注册")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:4},{default:o(()=>[_("div",Se,[t(X,{type:"success"},{default:o(()=>[g("注册成功！")]),_:1}),_("img",{src:D.value,width:"100",height:"100",alt:"Girl has dropped her ice cream."},null,8,ke)])]),_:1})]),_:1},8,["modelValue"]),_("div",{class:"gotoLogin",style:te({justifyContent:a(m)>0&&a(m)!=4?"space-between":"right"})},[a(m)>0&&a(m)!=4?(v(),R(C,{key:0,type:"primary",onClick:J},{default:o(()=>[g("上一步")]),_:1})):oe("",!0),a(m)!=4?(v(),R(F,{key:1,to:"/member/login"},{default:o(()=>[t(C,{type:"primary"},{default:o(()=>[g("已有账号去登录>>")]),_:1})]),_:1})):(v(),R(F,{key:2,to:"/member/login"},{default:o(()=>[t(C,{type:"primary"},{default:o(()=>[g("立即登录>>")]),_:1})]),_:1}))],4)])])}}};export{Ze as default};
