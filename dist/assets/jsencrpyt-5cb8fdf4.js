import{a as d}from"./axios-47b9d439.js";import{P as m,Q as c,u as h}from"./index-9a8e5c53.js";import{e as I,J as A}from"./jsencrypt.min-6ff93236.js";const b={set(e,t){sessionStorage&&e!=null&&t!=null&&sessionStorage.setItem(e,t)},get(e){return!sessionStorage||e==null?null:sessionStorage.getItem(e)},setJSON(e,t){t!=null&&this.set(e,JSON.stringify(t))},getJSON(e){const t=this.get(e);if(t!=null)return JSON.parse(t)},remove(e){sessionStorage.removeItem(e)}},y={set(e,t){localStorage&&e!=null&&t!=null&&localStorage.setItem(e,t)},get(e){return!localStorage||e==null?null:localStorage.getItem(e)},setJSON(e,t){t!=null&&this.set(e,JSON.stringify(t))},getJSON(e){const t=this.get(e);if(t!=null)return JSON.parse(t)},remove(e){localStorage.removeItem(e)}},u={session:b,local:y},p={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};function E(e){let t="";for(const a of Object.keys(e)){const r=e[a];var s=encodeURIComponent(a)+"=";if(r!==null&&r!==""&&typeof r<"u")if(typeof r=="object"){for(const n of Object.keys(r))if(r[n]!==null&&r[n]!==""&&typeof r[n]<"u"){let l=a+"["+n+"]";var o=encodeURIComponent(l)+"=";t+=o+encodeURIComponent(r[n])+"&"}}else t+=s+encodeURIComponent(r)+"&"}return t}const S={VITE_BASE_API:"/prod-api",BASE_URL:"/",MODE:"prod",DEV:!1,PROD:!0,SSR:!1};let f={show:!1};d.defaults.headers["Content-Type"]="application/json;charset=utf-8";const g=d.create({baseURL:S.VITE_BASE_API,timeout:1e4});console.log("当前环境",S.VITE_BASE_API);g.interceptors.request.use(e=>{m.start();const t=(e.headers||{}).isToken===!1;if(c()&&!t&&(e.headers.Authorization="Bearer "+c()),e.method==="get"&&e.params){let s=e.url+"?"+E(e.params);s=s.slice(0,-1),e.params={},e.url=s}if(e.method==="post"||e.method==="put"){const s={url:e.url,data:typeof e.data=="object"?JSON.stringify(e.data):e.data,time:new Date().getTime()},o=u.session.getJSON("sessionObj");if(o==null||o==="")u.session.setJSON("sessionObj",s);else{const a=o.url,r=o.data,n=o.time,l=1e3;if(r===s.data&&s.time-n<l&&a===s.url){const i="数据正在处理，请勿重复提交";return console.warn(`[${a}]: `+i),Promise.reject(new Error(i))}else u.session.setJSON("sessionObj",s)}}return e},e=>{console.log(e),Promise.reject(e)});g.interceptors.response.use(e=>{m.done();const t=e.data.code||200,s=p[t]||e.data.msg||p.default;return e.request.responseType==="blob"||e.request.responseType==="arraybuffer"?e.data:t===401?(f.show||(f.show=!0,h().replace("/401")),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):t===500?(I(s),Promise.reject(new Error(s))):e.data});const N=`MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMAXkY16VUvJEVqY82/k2hxCjGkCQfne
Gn7Vq3hsCLuGmmxYa6JeNeBkRIdkIWIGWvnXfbjPu/4AQ/TmsgRa2CcCAwEAAQ==`,B=`MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAwBeRjXpVS8kRWpjz
b+TaHEKMaQJB+d4aftWreGwIu4aabFhrol414GREh2QhYgZa+dd9uM+7/gBD9Oay
BFrYJwIDAQABAkEAqY7kSwbV7byBFgB2uak/obxYZoS4qg+UQarn3bc3ChceewcT
nT2Dp47J/UAoM3Yudn9mWfnaJmul18LrfNqh4QIhAP3eA8fdzdlSVUrG9woWc2p/
npTCuNq7xdkOJj6atKT3AiEAwbSyFPGfNFrkHA1WYxthcCmVt+aNGyZC15t+9IAH
ClECICSQOF0t7frx58ToWSZDy4W4Mb/dN8CRMNKtPgbgQ0pLAiBRP5qmoEZ37lvZ
zFpczaJMKpUrAuBS7/R/fTB+G6lYUQIgNSvKBaW92oVS8vGHCokLEUevTP0bc33e
GDhI52QNvgo=`;function C(e){const t=new A;return t.setPublicKey(N),t.encrypt(e)}function T(e){const t=new A;return t.setPrivateKey(B),t.decrypt(e)}export{T as d,C as e,g as s};
