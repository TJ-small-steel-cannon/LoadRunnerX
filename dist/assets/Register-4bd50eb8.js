import{I as U,_ as L,u as ee,r as v,a as g,J as Z,b as te,d as oe,e as w,f as t,w as r,j as n,K as re,L as le,M as R,N as ae,O as se,E as ne,F as ie,i as T,k as de,l as O,n as _,P as me,t as M,Q as pe,R as $,S as E,p as ue,q as ce,y as D,T as fe,z as ge,A as _e,H as we,C as ye,G as he,U as xe,V as be}from"./index-47caab3a.js";import{u as ve}from"./jsencrypt.min-a37f49fd.js";/* empty css                    *//* empty css                     */import{C as G,s as Ve}from"./success8-5f74cccd.js";import{e as Te}from"./jsencrpyt-05a4ce78.js";function Ce(f){return U({url:"/register",headers:{isToken:!1},method:"post",data:f})}function Ne(f){return U({url:"/valida_code/get_email",headers:{isToken:!1},method:"get",params:f})}function Se(f){return U({url:"/valida_code/get_phone",headers:{isToken:!1},method:"get",params:f})}const k=f=>(ue("data-v-94d9c81a"),f=f(),ce(),f),ze={class:"register"},Re={class:"registerContainer"},Ue=k(()=>w("span",{class:"title"},"注册 LoadRunnerX 压力测试平台",-1)),ke={class:"emailCode"},Ae=k(()=>w("div",{class:"divider"},null,-1)),Ie={class:"phoneCode"},Pe=k(()=>w("div",{class:"divider"},null,-1)),qe={style:{width:"100%","min-height":"272px",display:"flex","flex-direction":"column","align-items":"center"}},Be=["src"],Fe={__name:"Register",setup(f){const j=ve();ee();const H=v(Ve+"?"+ +new Date);let p=v(0);const A=v(null),I=v(null),C=v(null),i=g({userName:"",password:"",confirmPassword:""}),s=g({email:"",emailCode:"",emailUUID:"",phone:"",phoneCode:"",phoneUUID:""}),u=g({problemOne:"",answerOne:"",problemTwo:"",answerTwo:""}),J=g({userName:[{required:!0,message:"请输入用户名!",trigger:"change"},{validator(o,e,l){/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/.test(e)?l():l(new Error("账号必须是字母开头，可以包含字母、数字、下划线，长度在3到16个字符之间"))},trigger:"change"}],password:[{required:!0,message:"请输入密码!",trigger:"change"},{validator(o,e,l){/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/.test(e)?l():l(new Error("密码可以由字母、数字、下划线组成，至少包含一个字母和一个数字，长度在8到16个字符之间"))},trigger:"change"}],confirmPassword:[{required:!0,message:"请再次输入密码!",trigger:"change"},{validator(o,e,l){e!=i.password?l(new Error("两次密码输入不相符")):l()},trigger:"change"}]}),K=g({email:[{validator(o,e,l){!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/.test(e)&&e!=""?(y.disabled=!0,l(new Error("请输入正确邮箱"))):(e==""?y.disabled=!0:y.disabled=!1,l())},trigger:"change"}],emailCode:[{validator(o,e,l){const d=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{3,4})$/;d.test(s.email)&&e.length!=6?l(new Error("请正确输入邮箱验证码")):!d.test(s.email)&&e.length!=0?l(new Error("请勿输入验证码")):l()},trigger:"change"}],phone:[{validator(o,e,l){!/^1[3-9]\d{9}$/.test(e)&&e!=""?(h.disabled=!0,l(new Error("请输入正确手机号"))):(e==""?h.disabled=!0:h.disabled=!1,l())},trigger:"change"}],phoneCode:[{validator(o,e,l){const d=/^1[3-9]\d{9}$/;d.test(s.phone)&&e.length!=6?l(new Error("请正确输入手机验证码")):!d.test(s.phone)&&e.length!=0?l(new Error("请勿输入验证码")):l()},trigger:"change"}]}),Q=g({problemOne:[{required:!0,message:"请输入密保问题一",trigger:"change"}],answerOne:[{required:!0,message:"请输入密保答案一",trigger:"change"}],problemTwo:[{required:!0,message:"请输入密保问题二",trigger:"change"}],answerTwo:[{required:!0,message:"请输入密保答案二",trigger:"change"}]}),y=g({type:"primary",btnText:"获取验证码",disabled:!0}),h=g({type:"primary",btnText:"获取验证码",disabled:!0});let x=g({state:!1,text:"注册中"});function N(o){o.validate(e=>{if(e)if(o==C.value){x.state=!0,x.text="注册中";const l={userBornDay:"",userCompany:"",userGender:"",userHome:"",userIdCard:"",userName:i.userName,userNickName:"",userPassword:i.password,userPersonalProfile:"",userSecProblem1:u.problemOne,userSecProblem2:u.problemTwo,userSecAnswer3:"",userSecAnswer1:u.answerOne,userSecAnswer2:u.answerTwo,userSecProblem3:"",userSysEmail:s.email,vcEmailCode:{validation:s.emailCode,vcId:s.emailUUID},userTelephone:s.phone,vcTelephoneCode:{validation:s.phoneCode,vcId:s.phoneUUID}};Ce(l).then(d=>{if(d.code==200){D("注册成功"),p.value=4,x.state=!1,x.text="注册";const c={userName:i.userName,password:Te(i.password),isRememberPassword:!0};j.setuserInfo(c)}else console.log("err-->",d)}).finally(()=>{x.state=!1,x.text="注册"})}else p.value++})}function X(){p.value--}function P(o){o.type="",o.disabled=!0,o.btnText="请稍候...",o==h?Se({phoneNum:s.phone}).then(e=>{e.code==200&&(setTimeout(()=>{q(60,o)},500),s.phoneUUID=e.data.uuid)}):o==y&&Ne({emailAddr:s.email}).then(e=>{e.code==200?(setTimeout(()=>{q(60,o)},500),s.emailUUID=e.data.uuid):(console.log("w "),o.btnText="获取验证码",o.disabled=!1,o.type="primary")})}function q(o,e){D("验证码已发送! 有效期为5分钟"),o=o||60,e.btnText=o+"s后获取",setTimeout(()=>{o>0&&(e.btnText=o+"s后获取",--o)},1e3);let l=setInterval(()=>{o>0?(e.btnText=o+"s后获取",--o):(e.btnText="获取验证码",e.disabled=!1,e.type="primary",clearInterval(l))},1e3)}return Z(()=>i.userName,(o,e)=>{const l=/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/;o.length==1?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px":o.length==0||l.test(o)?document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".user_name").parentNode.parentNode.style.marginBottom="29px"}),Z(()=>i.password,(o,e)=>{const l=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;o.length==1?document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px":o.length==0||l.test(o)?document.querySelector(".password").parentNode.parentNode.style.marginBottom="18px":document.querySelector(".password").parentNode.parentNode.style.marginBottom="41px"}),(o,e)=>{const l=fe,d=se,c=ge,m=_e,b=we,S=ye,V=he,B=xe,W=be,Y=ne,z=ie,F=te("router-link");return T(),oe("div",ze,[w("div",Re,[Ue,t(d,{active:n(p),"finish-status":"success","process-status":"finish","align-center":"",space:100,class:"register_steps"},{default:r(()=>[t(l,{title:"填写账号密码"}),t(l,{title:"绑定邮箱/手机号"}),t(l,{title:"设置密保"}),t(l,{title:"完成注册"})]),_:1},8,["active"]),t(Y,{modelValue:n(p),"onUpdate:modelValue":e[16]||(e[16]=a=>re(p)?p.value=a:p=a),class:"tabs"},{default:r(()=>[t(V,{name:0},{default:r(()=>[t(S,{model:i,ref_key:"accountFormRef",ref:A,rules:J,class:"myForm"},{default:r(()=>[t(m,{prop:"userName"},{default:r(()=>[t(c,{modelValue:i.userName,"onUpdate:modelValue":e[0]||(e[0]=a=>i.userName=a),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:"","prefix-icon":n(de),size:"large",class:"user_name"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"password"},{default:r(()=>[t(c,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=a=>i.password=a),modelModifiers:{trim:!0},placeholder:"请输入密码",type:"password",class:"password",clearable:"","show-password":"","prefix-icon":n(O),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"confirmPassword"},{default:r(()=>[t(c,{modelValue:i.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>i.confirmPassword=a),modelModifiers:{trim:!0},placeholder:"请再次输入密码",type:"password",clearable:"","show-password":"","prefix-icon":n(O),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,null,{default:r(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[3]||(e[3]=a=>N(A.value))},{default:r(()=>[_(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:1},{default:r(()=>[t(S,{model:s,ref_key:"emailPhoneFormRef",ref:I,rules:K,class:"myForm"},{default:r(()=>[t(m,{prop:"email"},{default:r(()=>[t(B,{class:"box-item",effect:"dark",content:"如不需绑定邮箱不要填写直接下一步即可",placement:"top"},{default:r(()=>[t(c,{modelValue:s.email,"onUpdate:modelValue":e[4]||(e[4]=a=>s.email=a),modelModifiers:{trim:!0},placeholder:"请输入邮箱地址",clearable:"","prefix-icon":n(me),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(m,{prop:"emailCode"},{default:r(()=>[w("div",ke,[t(c,{modelValue:s.emailCode,"onUpdate:modelValue":e[5]||(e[5]=a=>s.emailCode=a),modelModifiers:{trim:!0},placeholder:"请输入邮箱验证码","prefix-icon":G,size:"large",maxlength:"6"},null,8,["modelValue"]),Ae,t(b,{link:"",type:y.type,class:"btnCode",disabled:y.disabled,onClick:e[6]||(e[6]=a=>P(y))},{default:r(()=>[_(M(y.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(m,{prop:"phone"},{default:r(()=>[t(B,{class:"box-item",effect:"dark",content:"如不需绑定手机不要填写直接下一步即可",placement:"top"},{default:r(()=>[t(c,{modelValue:s.phone,"onUpdate:modelValue":e[7]||(e[7]=a=>s.phone=a),modelModifiers:{trim:!0},placeholder:"请输入手机号",clearable:"","prefix-icon":n(pe),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(m,{prop:"phoneCode"},{default:r(()=>[w("div",Ie,[t(c,{modelValue:s.phoneCode,"onUpdate:modelValue":e[8]||(e[8]=a=>s.phoneCode=a),modelModifiers:{trim:!0},placeholder:"请输入手机验证码","prefix-icon":G,size:"large",maxlength:"6"},null,8,["modelValue"]),Pe,t(b,{link:"",type:h.type,class:"btnCode",disabled:h.disabled,onClick:e[9]||(e[9]=a=>P(h))},{default:r(()=>[_(M(h.btnText),1)]),_:1},8,["type","disabled"])])]),_:1}),t(m,null,{default:r(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[10]||(e[10]=a=>N(I.value))},{default:r(()=>[_(" 下一步")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:2},{default:r(()=>[t(S,{model:u,ref_key:"confidentialityFormRef",ref:C,rules:Q,class:"myForm"},{default:r(()=>[t(m,{prop:"problemOne"},{default:r(()=>[t(c,{modelValue:u.problemOne,"onUpdate:modelValue":e[11]||(e[11]=a=>u.problemOne=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题一",clearable:"","prefix-icon":n($),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"answerOne"},{default:r(()=>[t(c,{modelValue:u.answerOne,"onUpdate:modelValue":e[12]||(e[12]=a=>u.answerOne=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案一",clearable:"","prefix-icon":n(E),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"problemTwo"},{default:r(()=>[t(c,{modelValue:u.problemTwo,"onUpdate:modelValue":e[13]||(e[13]=a=>u.problemTwo=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题二",clearable:"","prefix-icon":n($),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"answerTwo"},{default:r(()=>[t(c,{modelValue:u.answerTwo,"onUpdate:modelValue":e[14]||(e[14]=a=>u.answerTwo=a),modelModifiers:{trim:!0},placeholder:"请输入密保问题答案二","prefix-icon":n(E),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,null,{default:r(()=>[t(b,{type:"primary",size:"large",style:{width:"100%"},onClick:e[15]||(e[15]=a=>N(C.value)),loading:n(x).state},{default:r(()=>[_(" 注册")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),t(V,{name:4},{default:r(()=>[w("div",qe,[t(W,{type:"success"},{default:r(()=>[_("注册成功！")]),_:1}),w("img",{src:H.value,width:"100",height:"100",alt:"Girl has dropped her ice cream."},null,8,Be)])]),_:1})]),_:1},8,["modelValue"]),w("div",{class:"gotoLogin",style:le({justifyContent:n(p)>0&&n(p)!=4?"space-between":"right"})},[n(p)>0&&n(p)!=4?(T(),R(z,{key:0,type:"primary",onClick:X},{default:r(()=>[_("上一步")]),_:1})):ae("",!0),n(p)!=4?(T(),R(F,{key:1,to:"/member/login"},{default:r(()=>[t(z,{type:"primary"},{default:r(()=>[_("已有账号去登录>>")]),_:1})]),_:1})):(T(),R(F,{key:2,to:"/member/login"},{default:r(()=>[t(z,{type:"primary"},{default:r(()=>[_("立即登录>>")]),_:1})]),_:1}))],4)])])}}},Ge=L(Fe,[["__scopeId","data-v-94d9c81a"]]);export{Ge as default};
